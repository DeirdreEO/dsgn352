<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>assignment 06t_bar bar chart</title>
    <script type="text/javascript" src="d3.js"> </script>
    <style type="css">
    /*.axis path,
    .axis line {
      fill: none;
      stroke: black;
      shape-rendering: crispEdges;
    }

    .axis text {
      font-family: sans-serif;
      font-size: 11px;
    }*/

    .bar {
  fill: steelblue;
}

.bar:hover {
  fill: brown;
}

.axis {
  font: 10px sans-serif;
}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.x.axis path {
  display: none;
}
    </style>
</head>
<body>


  <script type="text/javascript">

        var margin = {top: 10, right: 10, bottom: 10, left: 10},
            padding = {top: 30, right: 30, botton:30, left: 30},
            outerWidth = 960,
            outerHeight = 500,
            innerWidth = outerWidth - margin.right - margin.left,
            innerHeight = outerHeight -margin.top - margin.bottom,
            width = innerWidth - padding.right - padding.left,
            height = innerHeight - padding.top - padding.bottom;

        var barPadding = 7;

        var dataset;

        var svg = d3.select ("body")
          .append ("svg")
          .attr ("width", width + margin.left + margin.right)
          .attr ("height", height + margin.top + margin.bottom)
        .append("g")
          .attr("transform", "translate(" + margin.left + "," + margin.top + ")");


        d3.csv ( "bar_bar_chart.csv", function ( error, data ) {

            if ( error ) {
                // This displays an error message in console if the data fails to load.
                console.log ( "There was an error accessing your dataset." ) ;}
                else {

                // Assign the local variable 'data', which holds our CSV file info, to the global variable 'dataset'.
                dataset = data ;

                var bar_magnification = 50;

                d3
                  .select ("svg")
                  .selectAll("rect")
          			  .data(dataset)
          			  .enter()
          			  .append("rect")
                  .attr("x", function(d, i) {
                    return i * (width / dataset.length);
                  })
                  .attr("y", function(d) {
                    return height - d.Rating * bar_magnification;
                  }) //Height minus data value
                  .attr("bar_width", width / dataset.length - barPadding)
                  .attr("bar_height", function(d) {return d.Rating * bar_magnification;
                  })
                  // .attr("class", "bar")
                  .attr("fill", function (d) {
                    if(d.City == "Boston" ) {
                      return "blue";}
                    if(d. City == "Somerville") {
                      return "orange";}
                    if(d. City == "Cambridge") {
                      return "gray";}
                    })
                    };

                  d3
                    .select("svg")
                    .selectAll("text")
          			   .data(dataset)
          			   .enter()
          			   .append("text")
          			   .text(function(d) {
          			   		return d.Name;
          			   })
                   .attr("text-anchor", "middle")
          			   .attr("x", function(d, i) {
          			   		return i * (width / dataset.length) + (width / dataset.length - barPadding) / 2;
          			   })
          			   .attr("y", function(d) {
          			   		return height - (d.Rating * 10) + .5;
          			   })
          			   .attr("font-family", "sans-serif")
          			   .attr("font-size", "10px")
          			   .attr("fill", "black");
                  //  .attr("transform", "rotate(-90)");

               });

  </script>
</body>
</html>
